<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ß–ì–ö: –¢—É—Ä–Ω–∏—Ä (–∫–æ–º–∞–Ω–¥—ã)</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶â</text></svg>">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>ü¶â –ß–ì–ö: –¢—É—Ä–Ω–∏—Ä</h1>
      <p class="subtitle">–í–≤–æ–¥ –∫–æ–º–∞–Ω–¥ –∏ —É—á—ë—Ç –æ—á–∫–æ–≤ –ø–æ —Ç—É—Ä–∞–º</p>
      <button class="help-btn" onclick="openHelp()" title="–ü–æ–º–æ—â—å">‚ùì</button>
    </header>

    <div id="warningContainer" class="warning-container"></div>

    <div class="main-content">
      <!-- Teams Section -->
      <section class="section" id="teamsSection">
        <div class="section-header">
          <h2>–ö–æ–º–∞–Ω–¥—ã</h2>
          <button class="collapse-btn" onclick="toggleSection('teamsSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="player-input">
            <input type="text" id="teamNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã" class="input">
            <input type="color" id="teamColorInput" value="#3b82f6" class="color-input" title="–¶–≤–µ—Ç –∫–æ–º–∞–Ω–¥—ã">
            <button id="addTeamBtn" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="teamsList" class="players-list"></div>
        </div>
      </section>

      <!-- Settings / Round -->
      <section id="currentRoundSection" class="section">
        <div class="section-header">
          <h2 id="currentRoundTitle">–¢–µ–∫—É—â–∏–π —Ç—É—Ä</h2>
          <button class="collapse-btn" onclick="toggleSection('currentRoundSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div id="gameInfo" class="game-info"></div>
          <div class="round-header-bar">
            <div class="round-header-actions">
              <div class="settings-row" style="margin-bottom:0;">
                <label for="questionsPerRound">–í–æ–ø—Ä–æ—Å–æ–≤ –≤ —Ç—É—Ä–µ:</label>
                <input type="number" id="questionsPerRound" min="1" max="50" value="12" class="input-small">
              </div>
              <div class="settings-row" style="margin-bottom:0;">
                <label for="gameRoundsInput">–¢—É—Ä–æ–≤ –≤ –∏–≥—Ä–µ:</label>
                <input type="number" id="gameRoundsInput" min="1" max="50" value="5" class="input-small">
                <button id="startGameBtn" class="btn btn-secondary btn-small">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
              </div>
              <button id="questionTimerBtn" class="btn btn-primary btn-small" style="display:none;">‚è±Ô∏è –í–æ–ø—Ä–æ—Å</button>
            </div>
          </div>

          <div id="currentRoundContainer" class="current-round-container"></div>
          <div class="actions" id="roundActions">
            <button id="startRoundBtn" class="btn btn-primary">–ù–∞—á–∞—Ç—å —Ç—É—Ä</button>
            <button id="finalizeRoundBtn" class="btn btn-success" style="display:none;">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç—É—Ä</button>
            <button id="saveEditedRoundBtn" class="btn btn-success" style="display:none;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <button id="cancelEditRoundBtn" class="btn btn-secondary" style="display:none;">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
      </section>

      <!-- History -->
      <section class="section" id="historySection">
        <div class="section-header">
          <h2>–ò—Å—Ç–æ—Ä–∏—è —Ç—É—Ä–æ–≤</h2>
          <button class="collapse-btn" onclick="toggleSection('historySection')">‚àí</button>
        </div>
        <div class="section-body">
          <div id="roundsHistory" class="rounds-history"></div>
        </div>
      </section>

      <!-- Leaderboard -->
      <section class="section" id="leaderboardSection">
        <div class="section-header">
          <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
          <button class="collapse-btn" onclick="toggleSection('leaderboardSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div id="leaderboard" class="leaderboard"></div>
        </div>
      </section>

      <!-- Actions -->
      <section class="section" id="actionsSection">
        <div class="section-header">
          <h2>–î–µ–π—Å—Ç–≤–∏—è</h2>
          <button class="collapse-btn" onclick="toggleSection('actionsSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="actions">
            <button id="resetRoundsBtn" class="btn btn-warning">–°–±—Ä–æ—Å–∏—Ç—å —Ç—É—Ä—ã (–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã)</button>
            <button id="exportBtn" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç</button>
            <button id="importBtn" class="btn btn-secondary">–ò–º–ø–æ—Ä—Ç</button>
            <button id="exportGameTsvBtn" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç –∏–≥—Ä—ã (TSV)</button>
            <button id="exportGameTsvTransposeBtn" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç –∏–≥—Ä—ã (TSV, —Ç—Ä–∞–Ω—Å–ø–æ–Ω–∏—Ä.)</button>
            <button id="resetBtn" class="btn btn-danger">–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å</button>
            <input type="file" id="importFile" accept=".json" style="display:none;">
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>–ß–ì–ö: –¢—É—Ä–Ω–∏—Ä (–∫–æ–º–∞–Ω–¥—ã) | (c) Alexander Galkin, Hamburg | –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤–∞—à–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä</p>
    </footer>
  </div>

  <!-- Help Modal -->
  <div class="modal-overlay" id="helpModal" style="display:none;" onclick="closeHelp()">
    <div class="modal-content help-modal-content" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
        <button class="modal-close" onclick="closeHelp()">&times;</button>
      </div>
      <div class="modal-body help-modal-body">
        <section class="help-section">
          <h3>üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h3>
          <ol>
            <li>–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ + —Ü–≤–µ—Ç).</li>
            <li>–ù–∞–∂–º–∏—Ç–µ ¬´–ù–∞—á–∞—Ç—å —Ç—É—Ä¬ª.</li>
            <li>–û—Ç–º–µ—á–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º (—á–µ–∫–±–æ–∫—Å—ã).</li>
            <li>–ù–∞–∂–º–∏—Ç–µ ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç—É—Ä¬ª ‚Äî —Ç—É—Ä –ø–æ–ø–∞–¥—ë—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é, –∞ —Å–ª–µ–¥—É—é—â–∏–π –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</li>
          </ol>
        </section>
        <section class="help-section">
          <h3>‚è±Ô∏è –¢–∞–π–º–µ—Ä</h3>
          <ul>
            <li><strong>–ü—Ä–æ–±–µ–ª</strong> ‚Äî —Å—Ç–∞—Ä—Ç/–ø–∞—É–∑–∞/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</li>
            <li><strong>Enter</strong> ‚Äî —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</li>
            <li><strong>Esc</strong> ‚Äî –∑–∞–∫—Ä—ã—Ç—å</li>
          </ul>
        </section>
        <section class="help-section">
          <h3>üíæ –î–∞–Ω–Ω—ã–µ</h3>
          <ul>
            <li>–°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</li>
            <li>–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç ‚Äî —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∏ –ø–µ—Ä–µ–Ω–æ—Å.</li>
          </ul>
        </section>
      </div>
    </div>
  </div>

  <script src="chgk.js"></script>
</body>
</html>
