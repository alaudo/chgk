<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ß–ì–ö: –ü–µ—Ä–µ–º–µ—à–∫–∞</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶â</text></svg>">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>ü¶â –ß–ì–ö: –ü–µ—Ä–µ–º–µ—à–∫–∞</h1>
      <p class="subtitle">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ —É—á—ë—Ç–∞ –æ—á–∫–æ–≤</p>
    </header>

    <!-- Warning Container -->
    <div id="warningContainer" class="warning-container"></div>

    <!-- Main Content -->
    <div class="main-content">
      
      <!-- Players Section -->
      <section class="section" id="playersSection">
        <div class="section-header">
          <h2>–ò–≥—Ä–æ–∫–∏</h2>
          <button class="collapse-btn" onclick="toggleSection('playersSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="player-input">
            <input 
              type="text" 
              id="playerNameInput" 
              placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" 
              class="input">
            <label class="checkbox-label">
              <input type="checkbox" id="isCaptainCheck">
              –ö–∞–ø–∏—Ç–∞–Ω
            </label>
            <input 
              type="text" 
              id="teamNameInput" 
              placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" 
              class="input input-small">
            <button id="addPlayerBtn" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="playersList" class="players-list"></div>
        </div>
      </section>

      <!-- Game Section -->
      <section class="section" id="gameSection">
        <div class="section-header">
          <h2>üéÆ –ò–≥—Ä–∞</h2>
          <button class="collapse-btn" onclick="toggleSection('gameSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="settings-row">
            <label for="questionsPerRound">–í–æ–ø—Ä–æ—Å–æ–≤ –≤ —Ç—É—Ä–µ:</label>
            <input type="number" id="questionsPerRound" min="1" max="50" value="12" class="input-small">
          </div>
          <div class="settings-row">
            <label class="checkbox-label">
              <input type="checkbox" id="allowManualMove">
              –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤ –≤—Ä—É—á–Ω—É—é
            </label>
          </div>
          <div id="gameInfo" class="game-info"></div>
          <div id="gameControls" class="actions">
            <div class="game-presets">
              <p class="presets-label">–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:</p>
              <div class="preset-buttons">
                <button class="btn btn-secondary btn-small" onclick="setGamePreset(3, 12)">3 —Ç—É—Ä–∞ √ó 12 –≤–æ–ø—Ä–æ—Å–æ–≤</button>
                <button class="btn btn-secondary btn-small" onclick="setGamePreset(6, 6)">6 —Ç—É—Ä–æ–≤ √ó 6 –≤–æ–ø—Ä–æ—Å–æ–≤</button>
              </div>
            </div>
            <div class="settings-row">
              <label for="gameRoundsInput">–¢—É—Ä–æ–≤ –≤ –∏–≥—Ä–µ:</label>
              <input type="number" id="gameRoundsInput" min="1" max="50" value="5" class="input-small">
            </div>
            <button id="startGameBtn" class="btn btn-primary">–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É</button>
          </div>
          <div class="actions" style="margin-top: 1rem;">
            <button id="generateTeamsBtn" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã</button>
            <button id="reshuffleBtn" class="btn btn-secondary">–ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
          </div>
        </div>
      </section>

      <!-- Current Round Section -->
      <section id="currentRoundSection" class="section">
        <div class="section-header">
          <h2 id="currentRoundTitle">–¢–µ–∫—É—â–∏–π —Ç—É—Ä</h2>
          <button class="collapse-btn" onclick="toggleSection('currentRoundSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="round-header-bar">
            <div class="round-header-actions">
              <button id="reshuffleCurrentBtn" class="btn btn-secondary btn-small" style="display: none;">üîÄ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ç—É—Ä</button>
              <button id="addUnassignedPlayersBtn" class="btn btn-secondary btn-small" style="display: none;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö</button>
              <button id="questionTimerBtn" class="btn btn-primary btn-small" style="display: none;">‚è±Ô∏è –í–æ–ø—Ä–æ—Å</button>
            </div>
            <div class="view-switcher">
              <button id="viewTeamsBtn" class="btn btn-secondary active">–°–æ—Å—Ç–∞–≤—ã</button>
              <button id="viewScoringBtn" class="btn btn-secondary">–û—á–∫–∏</button>
            </div>
          </div>
          <div id="currentRoundContainer" class="current-round-container"></div>
          <div class="actions" id="roundActions">
            <button id="finalizeRoundBtn" class="btn btn-success">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç—É—Ä</button>
            <button id="saveEditedRoundBtn" class="btn btn-success" style="display: none;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <button id="cancelEditRoundBtn" class="btn btn-secondary" style="display: none;">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
      </section>

      <!-- Rounds History -->
      <section class="section" id="historySection">
        <div class="section-header">
          <h2>–ò—Å—Ç–æ—Ä–∏—è —Ç—É—Ä–æ–≤</h2>
          <button class="collapse-btn" onclick="toggleSection('historySection')">‚àí</button>
        </div>
        <div class="section-body">
          <div id="roundsHistory" class="rounds-history"></div>
        </div>
      </section>

      <!-- Leaderboard -->
      <section class="section" id="leaderboardSection">
        <div class="section-header">
          <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
          <button class="collapse-btn" onclick="toggleSection('leaderboardSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="leaderboard-tabs">
            <button id="playersTabBtn" class="tab-btn active" onclick="switchLeaderboardTab('players')">–ò–≥—Ä–æ–∫–∏</button>
            <button id="teamsTabBtn" class="tab-btn" onclick="switchLeaderboardTab('teams')">–ö–æ–º–∞–Ω–¥—ã</button>
            <button id="drawTabBtn" class="tab-btn" onclick="switchLeaderboardTab('draw')">–ñ–µ—Ä–µ–±—å—ë–≤–∫–∞</button>
          </div>
          <div id="leaderboard" class="leaderboard"></div>
        </div>
      </section>

      <!-- Actions -->
      <section class="section" id="actionsSection">
        <div class="section-header">
          <h2>–î–µ–π—Å—Ç–≤–∏—è</h2>
          <button class="collapse-btn" onclick="toggleSection('actionsSection')">‚àí</button>
        </div>
        <div class="section-body">
          <div class="actions">
            <button id="undoBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç—É—Ä</button>
            <button id="resetGameBtn" class="btn btn-warning">–°–±—Ä–æ—Å–∏—Ç—å —Ç—É—Ä—ã (–æ—Å—Ç–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤)</button>
            <button id="exportBtn" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç</button>
            <button id="importBtn" class="btn btn-secondary">–ò–º–ø–æ—Ä—Ç</button>
            <button id="resetBtn" class="btn btn-danger">–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å</button>
            <input type="file" id="importFile" accept=".json" style="display: none;">
          </div>
        </div>
      </section>

    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>Team Shuffle & Ratings v1.0 | Data stored in browser localStorage</p>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="storage.js"></script>
  <script src="algorithms.js"></script>
  <script src="app.js"></script>
  <script src="ui.js"></script>
  <script>
    // Initialize app on page load
    document.addEventListener('DOMContentLoaded', () => {
      appState.init();
      document.getElementById('questionsPerRound').value = appState.settings.questionsPerRound || 12;
      document.getElementById('gameRoundsInput').value = appState.settings.gameRounds || 5;
      initUI();
    });
  </script>
</body>
</html>
